\documentclass[letterpaper]{article} 
\usepackage{xeCJK}
\setCJKmainfont{KanjiStrokeOrders}
\setCJKsansfont{ipag.ttf}
\newCJKfontfamily\ipag{ipag.ttf}
\newCJKfontfamily\fancyfont{nagayama_kai}
%\newCJKfontfamily\fancyfont{HakusyuGyosyoPro_kk}
\usepackage{anyfontsize}
\usepackage[textheight=240mm, textwidth=180mm ]{geometry} 
\usepackage[most]{tcolorbox}
\usepackage{nopageno}
%%%%
%%% from stack exchange: https://tex.stackexchange.com/questions/272235/generalized-file-name-parsing
%%%% define command \levels for use in header
\makeatletter
\edef\levels@prefix{\detokenize{%
		% customize based on the file name structure
		% <---- PREFIX %
}}
\edef\levels@postfix{\detokenize{%
		% customize based on the file name structure
		-writing% <---- POSTFIX %
}}
\begingroup\edef\x{\endgroup
	\def\noexpand\levels@get\levels@prefix##1\levels@postfix\noexpand\@nil{##1}}%
%	\def\noexpand\levels@get\levels@postfix\noexpand\@nil{#1}}%
\x
\edef\levels{\expandafter\levels@get\jobname\@nil}
\makeatother
%%%
%%%
\setlength{\headheight}{15pt}
\usepackage{fancyhdr}
\pagestyle{fancy}
%%%%
%%%% CHANGE TO CHANGE HEADER
\lhead{\levels}
\chead{}
\rhead{}
\lfoot{}
\cfoot{\thepage}
\rfoot{}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0pt}
\usepackage{etoolbox}
%
\newcommand{\kana}[1]{\begin{tcolorbox}[colframe=white, size=minimal]\ipag\fontsize{14}{14}#1 \end{tcolorbox}}
%
%
\newcommand{\kanji}[1]{\centering\begin{tcolorbox}[colframe=black!50, left=0mm, square, overlay={\draw [gray, dashed] (frame.south) -- (frame.north);
\draw [gray, dashed] (frame.east) -- (frame.west);}]\hfuzz=99pt\fontsize{42}{42}#1 \end{tcolorbox}}
%
%
\newcommand{\strokes}[1]{\centering\begin{tcolorbox}[colframe=white, colupper=black!65,left=0mm, square]\hfuzz=99pt\fontsize{42}{42}#1 \end{tcolorbox}}
%
%
\newcommand{\fancykanji}[1]{\centering\begin{tcolorbox}[colframe=black!50, left=0mm, square, overlay={\draw [gray, dashed] (frame.south) -- (frame.north);
\draw [gray, dashed] (frame.east) -- (frame.west);}]\hfuzz=99pt\fancyfont\fontsize{42}{42}#1 \end{tcolorbox}}
%
%
\newcommand{\boxes}{\foreach \n in {1,...,7}{\begin{tcolorbox}[square, overlay={\draw [gray, dashed] (frame.south) -- (frame.north);
\draw [gray, dashed] (frame.east) -- (frame.west);}] \end{tcolorbox}}}
\newcommand{\blank}{\begin{tcolorbox}[colframe=white] \end{tcolorbox}}
\newcommand{\moreboxes}{\foreach \n in {1,...,8}{\begin{tcolorbox}[square, overlay={\draw [gray, dashed] (frame.south) -- (frame.north);
\draw [gray, dashed] (frame.east) -- (frame.west);}] \end{tcolorbox}}}
%
%
%%%
\begin{document}%
%
\begin{tcbraster}[enhanced,raster columns=9, raster equal height=all,size=title,colframe=black!50,colback=white,valign=center,halign=center]%
%
\input{\jobname-content.tex}%
%
\end{tcbraster}
%
\end{document}
